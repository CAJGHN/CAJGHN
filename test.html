<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gyro Tilt Demo</title>
<style>
html, body {
  margin:0;
  height:100%;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:sans-serif;
  transition: background 0.1s linear;
  background: linear-gradient(120deg, #1e3c72, #2a5298);
}

.card {
  width:200px;
  height:200px;
  background: rgba(255,255,255,0.15);
  border:1px solid rgba(255,255,255,0.2);
  border-radius:20px;
  backdrop-filter: blur(10px);
  box-shadow:0 20px 40px rgba(0,0,0,0.4);
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
  font-size:1.5rem;
  transform-style: preserve-3d;
  transition: transform 0.05s linear;
}

button {
  position:absolute;
  bottom:20px;
  padding:10px 20px;
  font-size:16px;
}
</style>
</head>
<body>
<div class="card" id="card">Tilt Me</div>
<button id="start">Enable Motion</button>

<script>
const card = document.getElementById('card');

function updateTilt(beta, gamma) {
  const maxRotate = 25; // 최대 회전
  const x = Math.max(Math.min(gamma/90*maxRotate, maxRotate), -maxRotate);
  const y = Math.max(Math.min(beta/90*maxRotate, maxRotate), -maxRotate);

  card.style.transform = `rotateY(${x}deg) rotateX(${-y}deg)`;

  // 배경 색상 변경
  const hue = (gamma + 90) * 2; // gamma: -90~90
  document.body.style.background = `linear-gradient(120deg, hsl(${hue},70%,40%), hsl(${hue+60},70%,40%))`;
}

document.getElementById('start').addEventListener('click', () => {
  if(typeof DeviceOrientationEvent.requestPermission === 'function') {
    // iOS 13+
    DeviceOrientationEvent.requestPermission().then(state => {
      if(state === 'granted') {
        window.addEventListener('deviceorientation', e => {
          updateTilt(e.beta || 0, e.gamma || 0);
        });
      } else {
        alert('Permission denied');
      }
    }).catch(console.error);
  } else {
    // Android, iOS 12 이하
    window.addEventListener('deviceorientation', e => {
      updateTilt(e.beta || 0, e.gamma || 0);
    });
  }
});
</script>
</body>
</html>
