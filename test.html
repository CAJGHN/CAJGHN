<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gyro Demo</title>
<style>
html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  background:linear-gradient(120deg,#1e3c72,#2a5298);
  display:flex;
  justify-content:center;
  align-items:center;
  transition:background 0.2s ease;
  font-family:sans-serif;
}
.card{
  width:250px;height:250px;
  background:rgba(255,255,255,0.15);
  border:1px solid rgba(255,255,255,0.2);
  border-radius:20px;
  backdrop-filter:blur(10px);
  box-shadow:0 20px 40px rgba(0,0,0,0.4);
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
  font-size:1.5rem;
  perspective:1000px;
  transform-style:preserve-3d;
  transition:transform 0.1s linear;
}
</style>
</head>
<body>
<div class="card" id="card">Tilt Me</div>

<script>
const card=document.getElementById('card');
function updateTilt(beta,gamma){
  // beta: front/back (-180 ~ 180)
  // gamma: left/right (-90 ~ 90)
  const maxRotate=20;
  const x = Math.max(Math.min(gamma/90*maxRotate, maxRotate), -maxRotate);
  const y = Math.max(Math.min(beta/90*maxRotate, maxRotate), -maxRotate);

  card.style.transform=`rotateY(${x}deg) rotateX(${ -y }deg)`;

  // background hue shift
  const hue = (gamma + 90) * 2;
  document.body.style.background=`linear-gradient(120deg, hsl(${hue},70%,40%), hsl(${hue+60},70%,40%))`;
}

if(window.DeviceOrientationEvent){
  // iOS 13+ 권한 요청
  if(typeof DeviceOrientationEvent.requestPermission === 'function'){
    DeviceOrientationEvent.requestPermission()
      .then(permission=>{
        if(permission==='granted'){
          window.addEventListener('deviceorientation', e=>{
            updateTilt(e.beta||0,e.gamma||0);
          });
        }
      }).catch(console.error);
  }else{
    window.addEventListener('deviceorientation', e=>{
      updateTilt(e.beta||0,e.gamma||0);
    });
  }
}else{
  card.textContent='Sensor not supported';
}
</script>
</body>
</html>
